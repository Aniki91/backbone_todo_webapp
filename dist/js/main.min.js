var app={};$(document).ready(function(){app.Todo=Backbone.Model.extend({"default":{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})}}),app.TodoList=Backbone.Collection.extend({model:app.Todo,completed:function(){return this.where({completed:!0})},notCompleted:function(){return this.where({completed:!1})}});var a=new app.TodoList([new app.Todo({title:"Item 1",completed:!1}),new app.Todo({title:"Item 2",completed:!1}),new app.Todo({title:"Item 3",completed:!1})]);app.TodoItem=Backbone.View.extend({tagName:"li",template:_.template($("#item-template").html()),events:{"click ._complete":"complete"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},complete:function(){this.model.destroy()}}),app.TodoList=Backbone.View.extend({el:"#todo-list",events:{"click ._list-add":"listAdd"},initialize:function(){this.render()},render:function(){var a=this;return this.collection.each(function(b){a.$el.append(new app.TodoItem({model:b}).render().el)}),console.log(this.collection),console.log(this.collection.notCompleted()),this},listAdd:function(){var a=$("._input").val();if(a.length>0){var b=new app.Todo({title:a,completed:!1});this.collection.add(b),this.$el.append(new app.TodoItem({model:b}).render().el),console.log(this.collection)}}}),console.log(a),new app.TodoList({collection:a})});